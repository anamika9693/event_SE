<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <style>
        #navbar nav {
            height: 10rem;
            width: 100vw;
            background-color: #131418;
            box-shadow: 0 3px 20px rgba(0, 0, 0, 0.2);
            display: flex;
            position: fixed;
            z-index: 10;
        }

        /*Styling logo*/
        #navbar .logo {
            padding: 1vh 1vw;
            text-align: center;
        }

        #navbar .logo img {
            height: 8 rem;
            width: 8rem;
        }

        /*Styling Links*/
        #navbar .nav-links {
            display: flex;
            list-style: none;
            width: 88vw;
            padding: 0 0.7vw;
            justify-content: space-evenly;
            align-items: center;
            text-transform: uppercase;
        }

        #navbar .nav-links li a {
            text-decoration: none;
            margin: 0 0.7vw;
        }

        #navbar .nav-links li a:hover {
            color: #61DAFB;
        }

        #navbar .nav-links li {
            position: relative;
        }

        #navbar .nav-links li a::before {
            content: "";
            display: block;
            height: 3px;
            width: 0%;
            background-color: #61DAFB;
            position: absolute;
            transition: all ease-in-out 250ms;
            margin: 0 0 0 10%;
        }

        #navbar .nav-links li a:hover::before {
            width: 80%;
        }

        /*Styling Buttons*/
        #navbar .login-button {
            background-color: transparent;
            border: 1.5px solid #f2f5f7;
            border-radius: 2em;
            padding: 0.6rem 0.8rem;
            margin-left: 2vw;
            font-size: 2rem;
            cursor: pointer;

        }

        #navbar .login-button:hover {
            color: #131418;
            background-color: #f2f5f7;
            border: 1.5px solid #f2f5f7;
            transition: all ease-in-out 350ms;
        }

        #navbar .join-button {
            color: #131418;
            background-color: #61DAFB;
            border: 1.5px solid #61DAFB;
            border-radius: 2em;
            padding: 0.6rem 0.8rem;
            font-size: 2rem;
            cursor: pointer;
        }

        #navbar .join-button:hover {
            color: #f2f5f7;
            background-color: transparent;
            border: 1.5px solid #f2f5f7;
            transition: all ease-in-out 350ms;
        }

        /*Styling Hamburger Icon*/
        #navbar .hamburger div {
            width: 30px;
            height: 3px;
            background: #f2f5f7;
            margin: 5px;
            transition: all 0.3s ease;
        }

        #navbar .hamburger {
            display: none;
        }

        /*Stying for small screens*/
        @media screen and (max-width: 800px) {
            nav {
                position: fixed;
                z-index: 3;
            }

            .hamburger {
                display: block;
                position: absolute;
                cursor: pointer;
                right: 5%;
                top: 50%;
                transform: translate(-5%, -50%);
                z-index: 2;
                transition: all 0.7s ease;
            }

            .nav-links {
                position: fixed;
                background: #131418;
                height: 100vh;
                width: 100%;
                flex-direction: column;
                clip-path: circle(50px at 90% -20%);
                -webkit-clip-path: circle(50px at 90% -10%);
                transition: all 1s ease-out;
                pointer-events: none;
            }

            .nav-links.open {
                clip-path: circle(1000px at 90% -10%);
                -webkit-clip-path: circle(1000px at 90% -10%);
                pointer-events: all;
            }

            .nav-links li {
                opacity: 0;
            }

            .nav-links li:nth-child(1) {
                transition: all 0.5s ease 0.2s;
            }

            .nav-links li:nth-child(2) {
                transition: all 0.5s ease 0.4s;
            }

            .nav-links li:nth-child(3) {
                transition: all 0.5s ease 0.6s;
            }

            .nav-links li:nth-child(4) {
                transition: all 0.5s ease 0.7s;
            }

            .nav-links li:nth-child(5) {
                transition: all 0.5s ease 0.8s;
            }

            .nav-links li:nth-child(6) {
                transition: all 0.5s ease 0.9s;
                margin: 0;
            }

            .nav-links li:nth-child(7) {
                transition: all 0.5s ease 1s;
                margin: 0;
            }

            li.fade {
                opacity: 1;
            }
        }

        /*Animating Hamburger Icon on Click*/
        #navbar .toggle .line1 {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        #navbar .toggle .line2 {
            transition: all 0.7s ease;
            width: 0;
        }

        #navbar .toggle .line3 {
            transform: rotate(45deg) translate(-5px, -6px);
        }
    </style>
    <link rel="stylesheet" href="../public/show_event.css">
    <link rel="stylesheet" href="../public/notif_js_css/notif.css">

    <style>
        .section {
            overflow: hidden;
            transition: height 0.3s ease-out;
            height: auto;
        }
    </style>


</head>



<body style="background-image:linear-gradient(80deg,#ed44b5,#eab043);">

    <div style="height:100px" id='navbar'>
        <nav class='chota'>


            <div class="hamburger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
            <ul>
            </ul>
            <ul style="margin-top: 20px;">
                <a href='/'>
                    <img src="https://cdn-icons-png.flaticon.com/512/3942/3942578.png" alt="ddd"
                        style=" background-color:#eab043 height:20px; width:50px; border-radius:60px; margin-left:34px ">
                </a>
            </ul>
            <ul class="nav-links" style="margin-left: 100px;">

                {{!-- <li><a href="#" style="color:white">Home</a></li> --}}
                {{!-- <li><a href="#">Solutions</a></li>
                <li><a href="#">Products</a></li>
                <li><a href="#">Services</a></li>
                <li><a href="#">Contact Us</a></li> --}}
                {{!-- <li><button class="login-button" href="#">Login</button></li>
                <li><button class="join-button" href="#">Join</button></li> --}}



                <div class="notification ghanti" style="margin-left:900px;">

                    <div class="notBtn ghanti" href="#">
                        <ion-icon name="notifications-outline" style="padding-top: 5px;"></ion-icon>

                        <!--Number supports double digets and automaticly hides itself when there is nothing between divs -->

                        <div class="box ghanti">
                            <div class="display ghanti">
                                <div class="nothing ghanti">
                                    <i class="fas fa-child stick ghanti"></i>
                                    <div class="cent ghanti">Looks Like your all caught up!</div>
                                </div>

                                {{#if event_data}}
                                <div class="cont ghanti">
                                    {{#if (notEmpty event_data.waitlist)}}

                                    <!-- Fold this div and try deleting evrything inbetween -->
                                    {{#each event_data.waitlist}}
                                    <div class="sec new ghanti">
                                        <form action="/waitlist_clicked" method="get">
                                            <input type="hidden" name="event" value="{{this.code}}">
                                            <div class="txt ghanti" onclick="this.parentNode.submit()"
                                                style='padding-left:15%'>
                                                Now you can register for
                                                {{this.name}}!!</div>
                                        </form>
                                    </div>
                                    {{/each}}
                                    {{/if}}
                                    {{#if (notEmpty event_data.Events)}}
                                    <!-- Fold this div and try deleting evrything inbetween -->
                                    {{#each event_data.Events}}
                                    <div class="sec new ghanti">
                                        <form action="/notif_clicked" method="get">
                                            <input type="hidden" name="event" value="{{@key}}">
                                            <div class="txt ghanti" onclick="this.parentNode.submit()"
                                                style='padding-left:15%'>
                                                There has been an Update
                                                to event
                                                {{this.name}}!!</div>
                                            <div class="txt sub ghanti" onclick="this.parentNode.submit()">Edited on:
                                                {{#formatTime
                                                this.time
                                                "YYYY-MM-DD"}}{{/formatTime}}</div>
                                        </form>
                                    </div>
                                    {{/each}}
                                    {{/if}}
                                </div>
                                {{/if}}
                            </div>
                        </div>
                    </div>
                </div>
                <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js">
                </script>
                <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
                <script src="../public/notif_js_css/notif.js"></script>
                <div class="messages">

                </div>




                {{!-- <li><button class="join-button" href="#">Logout</button></li> --}}
                <a href='logout'>
                    <img src="https://png.pngtree.com/png-vector/20190505/ourmid/pngtree-vector-logout-icon-png-image_1023261.jpg"
                        alt="ddd"
                        style=" background-color:#eab043 height:20px; width:50px; border-radius:30px; margin-right:30px">
                </a><a href='/profile'>
                    <img src="data:{{image.contentType}};base64,
              {{image.data}} " alt="ddd"
                        style=" background-color:#eab043 height:20px; width:50px; border-radius:50px; ">
                </a>

            </ul>

        </nav>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>

    <div>
        <h2 style="font-size:xx-large; font-family:'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">CREATED
            EVENTS</h2>
        <div style="margin-right: 50px; margin-left:20px;  ">
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th>Event Name</th>
                        <th>Registration Date</th>
                        <th>Event Date</th>
                        <th>Event Time</th>
                        <th>Event Type</th>
                        <th>Event Status</th>
                        <th>Event Scope</th>
                        <th>Event Code</th>
                        <th>Event Edit</th>
                        <th>Event Delete</th>
                    </tr>
                </thead>

                {{#data}}
                <tbody class="toggle-button" id="body{{@index}}"
                    style="background-color: beige; color:brown; font-weight:bold;font-size:100px">
                    <tr style="font: size 50px;">

                        <td style="font-size: 20px;">{{event_name}}</td>
                        <td style="font-size: 20px;">{{formatTime date.registration "MM-DD-YYYY"}}</td>
                        <td style="font-size: 20px;">{{formatTime date.event_date "MM-DD-YYYY"}}</td>
                        <td style="font-size: 20px;">{{time}}</td>
                        <td style="font-size: 20px;">{{type}}</td>
                        <td style="font-size: 20px;">{{status}}</td>
                        <td style="font-size: 20px;">{{scope.scope}}</td>
                        <td><button type="button" value={{scope.code}}
                                class="code_class btn btn-sm btn-outline btn-success" id=code-{{@index}}
                                style="height: 30px; width:70px" onclick="fun({{@index}})"> <span
                                    style="font-size:larger; font-weight:bold"> Copy Code </span></button></td>
                        <td>
                            <form method='post' action='/edit_event'><button type="submit" value={{scope.code}}
                                    style="height: 30px; width:70px"
                                    class="code_class btn btn-sm btn-outline btn-success" name='Edit'> <span
                                        style="font-size:larger; font-weight:bold"> Edit Me</span></button></form>
                        </td>

                        <td>
                            <script>function sure() { return confirm('are you sure?'); }</script>
                            <form method='post' action='/delete_event' onsubmit="return sure();"><button type="submit"
                                    style="height: 30px; width:70px" value={{scope.code}}
                                    class="code_class btn btn-sm btn-outline btn-success" name='Edit'><span
                                        style="font-size:larger; font-weight:bold"> Delete Me</span>
                                </button></form>

                        </td>
                    </tr>
                    <tr style="background-image:linear-gradient(270deg,#cbcd28,#e2399f)">
                        <td colspan="10" style=" margin:0; padding: 5px;">
                            <form class="section collapsible" id="form{{@index}}" action="/get_list" method="post">
                                <button id="data{{@index}}" name="attendee" style="width:100%" value="{{scope.code}}">
                                    Get attendee list
                                </button>

                            </form>

                        </td>
                    </tr>

                </tbody>
                {{/data}}

            </table>
        </div>
    </div>

    <script defer>
        function fun(a) {
            let str = document.getElementById(`code-${a}`).value
            navigator.clipboard.writeText(str);

            document.execCommand("copy");
            alert(`copied code`)
        }
        // This is the important part!

        function collapseSection(element) {
            // get the height of the element's inner content, regardless of its actual size
            var sectionHeight = element.scrollHeight;

            // temporarily disable all css transitions
            var elementTransition = element.style.transition;
            element.style.transition = '';

            // on the next frame (as soon as the previous style change has taken effect),
            // explicitly set the element's height to its current pixel height, so we 
            // aren't transitioning out of 'auto'
            requestAnimationFrame(function () {
                element.style.height = sectionHeight + 'px';
                element.style.transition = elementTransition;

                // on the next frame (as soon as the previous style change has taken effect),
                // have the element transition to height: 0
                requestAnimationFrame(function () {
                    element.style.height = 0 + 'px';
                });
            });

            // mark the section as "currently collapsed"
            element.setAttribute('data-collapsed', 'true');
        }

        function expandSection(element) {
            // get the height of the element's inner content, regardless of its actual size
            var sectionHeight = element.scrollHeight;

            // have the element transition to the height of its inner content
            element.style.height = sectionHeight + 'px';

            // when the next css transition finishes (which should be the one we just triggered)
            element.addEventListener('transitionend', function (e) {
                // remove this event listener so it only gets triggered once
                element.removeEventListener('transitionend', arguments.callee);

                // remove "height" from the element's inline styles, so it can return to its initial value
                element.style.height = null;
            });

            // mark the section as "currently not collapsed"
            element.setAttribute('data-collapsed', 'false');
        }

        for (var k of document.getElementsByClassName('toggle-button')) {
            k.addEventListener('click', function (e) {
                var id = this.id.substr(4);
                var section = document.getElementById('form' + id);
                var isCollapsed = section.getAttribute('data-collapsed') === 'true';

                if (isCollapsed) {
                    expandSection(section)
                    section.setAttribute('data-collapsed', 'false')
                } else {
                    collapseSection(section)
                }
            });
            k.click();
        }
    </script>

</body>

</html>